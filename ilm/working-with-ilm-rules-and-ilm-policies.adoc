---
permalink: ilm/working-with-ilm-rules-and-ilm-policies.html 
sidebar: sidebar 
keywords: remove ilm rule, edit ilm rule, clone ilm rule, ilm queue 
summary: 随着存储需求的变化，您可能需要实施不同的策略或修改与该策略相关的 ILM 规则。您可以查看 ILM 指标来确定系统性能。 
---
= 使用 ILM 策略和 ILM 规则
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
随着存储需求的变化，您可能需要实施其他策略或修改与策略相关的 ILM 规则。您可以查看 ILM 指标来确定系统性能。

.开始之前
* 您已使用link:../admin/web-browser-requirements.html["支持的网络浏览器"]。
* 你有link:../admin/admin-group-permissions.html["特定访问权限"]。




== 查看 ILM 策略

要查看活动和非活动的 ILM 策略以及策略激活历史记录：

. 选择 *ILM* > *策略*。
. 选择“*政策*”来查看有效和非有效政策的列表。该表列出了每个策略的名称、分配给该策略的标签以及该策略是否处于活动状态。
. 选择*激活历史*来查看策略激活开始和结束日期的列表。
. 选择策略名称以查看该策略的详细信息。
+

NOTE: 如果您查看状态为“已编辑”或“已删除”的策略的详细信息，则会出现一条消息，说明您正在查看在指定时间范围内有效且随后已被编辑或删除的策略版本。





== 编辑 ILM 策略

您只能编辑非活动策略。如果您想编辑活动策略，请停用它或创建克隆并编辑该克隆。

要编辑策略：

. 选择 *ILM* > *策略*。
. 选中要编辑的策略的复选框，然后选择*编辑*。
. 按照以下说明编辑策略link:creating-ilm-policy.html["创建 ILM 策略"]。
. 在重新激活该策略之前，请先对其进行模拟。



CAUTION: 错误配置的 ILM 策略可能会导致无法恢复的数据丢失。在激活 ILM 策略之前，请仔细检查 ILM 策略及其 ILM 规则，然后模拟 ILM 策略。始终确认 ILM 策略能够按预期发挥作用。



== 克隆 ILM 策略

要克隆 ILM 策略：

. 选择 *ILM* > *策略*。
. 选中要克隆的策略的复选框，然后选择*克隆*。
. 按照以下说明，从您克隆的策略开始创建新策略link:creating-ilm-policy.html["创建 ILM 策略"]。



CAUTION: 错误配置的 ILM 策略可能会导致无法恢复的数据丢失。在激活 ILM 策略之前，请仔细检查 ILM 策略及其 ILM 规则，然后模拟 ILM 策略。始终确认 ILM 策略能够按预期发挥作用。



== 删除 ILM 策略

您只能删除处于非活动状态的 ILM 策略。要删除策略：

. 选择 *ILM* > *策略*。
. 选中要删除的非活动策略的复选框。
. 选择*删除*。




== 查看 ILM 规则详细信息

要查看 ILM 规则的详细信息，包括规则的保留图和放置说明：

. 选择 *ILM* > *规则*。
. 选择要查看其详细信息的规则的名称。示例：
+
image::../media/ilm_rule_details_page.png[ILM 规则详细信息页面]



此外，您可以使用详细信息页面来克隆、编辑或删除规则。如果某条规则已在任何策略中使用，则您无法编辑或删除该规则。



== 克隆 ILM 规则

如果您想创建使用现有规则的某些设置的新规则，您可以克隆现有规则。如果您需要编辑任何策略中使用的规则，您可以克隆该规则并对克隆进行更改。对克隆进行更改后，您可以根据需要从策略中删除原始规则并将其替换为修改后的版本。


NOTE: 如果 ILM 规则是使用StorageGRID 10.2 或更早版本创建的，则无法克隆该规则。

.步骤
. 选择 *ILM* > *规则*。
. 选中要克隆的规则的复选框，然后选择*克隆*。或者，选择规则名称，然后从规则详细信息页面中选择*克隆*。
. 按照以下步骤更新克隆的规则<<编辑 ILM 规则,编辑 ILM 规则>>和link:create-ilm-rule-enter-details.html#use-advanced-filters-in-ilm-rules["在 ILM 规则中使用高级过滤器"]。
+
克隆 ILM 规则时，必须输入新名称。





== 编辑 ILM 规则

您可能需要编辑 ILM 规则来更改过滤器或放置指令。

如果规则已在任何 ILM 策略中使用，则您无法编辑该规则。相反，你可以<<clone-ilm-rule,克隆规则>>并对克隆的副本进行任何必要的更改。


CAUTION: 错误配置的 ILM 策略可能会导致无法恢复的数据丢失。在激活 ILM 策略之前，请仔细检查 ILM 策略及其 ILM 规则，然后模拟 ILM 策略。始终确认 ILM 策略能够按预期发挥作用。

.步骤
. 选择 *ILM* > *规则*。
. 确认您要编辑的规则未在任何 ILM 策略中使用。
. 如果您要编辑的规则未被使用，请选中该规则的复选框并选择*操作* > *编辑*。或者，选择规则的名称，然后在规则详细信息页面上选择*编辑*。
. 完成编辑 ILM 规则向导的步骤。必要时，请按照以下步骤操作link:create-ilm-rule-enter-details.html["创建 ILM 规则"]和link:create-ilm-rule-enter-details.html#use-advanced-filters-in-ilm-rules["在 ILM 规则中使用高级过滤器"]。
+
编辑 ILM 规则时，您不能更改其名称。





== 删除 ILM 规则

为了使当前 ILM 规则列表易于管理，请删除任何不太可能使用的 ILM 规则。

.步骤
要删除当前在活动策略中使用的 ILM 规则：

. 克隆策略。
. 从策略克隆中删除 ILM 规则。
. 保存、模拟并激活新策略以确保对象受到预期的保护。
. 转至删除当前在非活动策略中使用的 ILM 规则的步骤。


要删除当前在非活动策略中使用的 ILM 规则：

. 选择非活动策略。
. 从策略中删除 ILM 规则或<<remove-ilm-policy,删除策略>>。
. 转至删除当前未使用的 ILM 规则的步骤。


要删除当前未使用的 ILM 规则：

. 选择 *ILM* > *规则*。
. 确认您要删除的规则未在任何策略中使用。
. 如果要删除的规则未被使用，请选择该规则并选择*操作* > *删除*。您可以选择多个规则并同时删除所有规则。
. 选择“是”确认您要删除 ILM 规则。




== 查看 ILM 指标

您可以查看 ILM 的指标，例如队列中的对象数和评估率。您可以监控这些指标来确定系统性能。较大的队列或评估率可能表明系统无法跟上摄取率、客户端应用程序的负载过大或存在某些异常情况。

.步骤
. 选择*仪表板* > *ILM*。
+

NOTE: 由于仪表板可以自定义，因此 ILM 选项卡可能不可用。

. 监控 ILM 选项卡上的指标。
+
您可以选择问号image:../media/icon_nms_question.png["问号图标"]查看 ILM 选项卡上项目的描述。

+
image::../media/ilm_metrics_on_dashboard.png[网格管理器仪表板上的 ILM 指标]


