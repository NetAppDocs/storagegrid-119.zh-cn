---
permalink: ilm/configuring-regions-optional-and-s3-only.html 
sidebar: sidebar 
keywords: S3 regions, region, ilm rules 
summary: ILM 规则可以根据创建 S3 存储桶的区域过滤对象，从而允许您将来自不同区域的对象存储在不同的存储位置。 
---
= 配置区域（可选，仅限 S3）
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM 规则可以根据创建 S3 存储桶的区域过滤对象，从而允许您将来自不同区域的对象存储在不同的存储位置。

如果您想使用 S3 存储桶区域作为规则中的过滤器，则必须首先创建系统中存储桶可以使用的区域。


NOTE: 存储桶创建后，您无法更改其区域。

.开始之前
* 您已使用link:../admin/web-browser-requirements.html["支持的网络浏览器"]。
* 你有link:../admin/admin-group-permissions.html["特定访问权限"]。


.关于此任务
创建 S3 存储桶时，您可以指定在特定区域中创建该存储桶。指定区域可使存储桶在地理位置上靠近其用户，这有助于优化延迟、降低成本并满足监管要求。

创建 ILM 规则时，您可能希望使用与 S3 存储桶关联的区域作为高级过滤器。例如，您可以设计一条规则，仅适用于在 `us-west-2`地区。然后，您可以指定将这些对象的副本放置在该区域内的数据中心站点的存储节点上，以优化延迟。

配置区域时，请遵循以下准则：

* 默认情况下，所有 bucket 都被视为属于 `us-east-1`地区。
* 在使用租户管理器或租户管理 API 创建存储桶时，或者使用 S3 PUT Bucket API 请求的 LocationConstraint 请求元素创建存储桶时，必须先使用网格管理器创建区域，然后才能指定非默认区域。如果 PUT Bucket 请求使用StorageGRID中未定义的区域，则会发生错误。
* 创建 S3 存储桶时必须使用准确的区域名称。区域名称区分大小写。有效字符为数字、字母和连字符。
+

NOTE: EU 不被视为 eu-west-1 的别名。如果您想使用 EU 或 eu-west-1 区域，则必须使用准确的名称。

* 如果某个区域用于分配给任何策略（活动或非活动）的规则中，则您无法删除或修改该区域。
* 如果您使用无效区域作为 ILM 规则中的高级过滤器，则无法将该规则添加到策略中。
+
如果您在 ILM 规则中使用某个区域作为高级过滤器但后来删除了该区域，或者您使用网格管理 API 创建规则并指定了未定义的区域，则可能会导致区域无效。

* 如果您在使用某个区域创建 S3 存储桶后将其删除，则如果您想使用位置约束高级过滤器来查找该存储桶中的对象，则需要重新添加该区域。


.步骤
. 选择 *ILM* > *区域*。
+
出现“区域”页面，其中列出了当前定义的区域。  *区域 1* 显示默认区域， `us-east-1` ，无法修改或删除。

. 要添加区域：
+
.. 选择*添加另一个区域*。
.. 输入创建 S3 存储桶时要使用的区域的名称。
+
创建相应的 S3 存储桶时，必须使用此精确的区域名称作为 LocationConstraint 请求元素。



. 要删除未使用的区域，请选择删除图标image:../media/icon-x-to-remove.png["删除图标"]。
+
如果您尝试删除任何策略（活动或非活动）中当前使用的区域，则会出现一条错误消息。

. 完成更改后，选择“*保存*”。
+
您现在可以从创建 ILM 规则向导第 1 步中的高级过滤器部分中选择这些区域。看link:create-ilm-rule-enter-details.html#use-advanced-filters-in-ilm-rules["在 ILM 规则中使用高级过滤器"] 。


