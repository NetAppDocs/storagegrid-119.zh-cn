---
permalink: ilm/create-ilm-rule-enter-details.html 
sidebar: sidebar 
keywords: ILM rule step 1, define basics 
summary: 创建 ILM 规则向导的步骤 1（输入详细信息）允许您输入规则的名称和描述并为规则定义过滤器。 
---
= 第 1 步（共 3 步）：输入详细信息
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
创建 ILM 规则向导的 *输入详细信息* 步骤允许您输入规则的名称和描述并为规则定义过滤器。

输入描述和定义规则的过滤器是可选的。

.关于此任务
当根据link:what-ilm-rule-is.html["ILM 规则"]， StorageGRID将对象元数据与规则的过滤器进行比较。如果对象元数据与所有过滤器匹配， StorageGRID将使用该规则来放置该对象。您可以设计一个规则应用于所有对象，也可以指定基本过滤器（例如一个或多个租户帐户或存储桶名称）或高级过滤器（例如对象的大小或用户元数据）。

.步骤
. 在“名称”字段中输入规则的唯一名称。
. 或者，在“*描述*”字段中输入规则的简短描述。
+
您应该描述规则的目的或功能，以便以后能够识别该规则。

. 或者，选择一个或多个适用此规则的 S3 租户帐户。如果此规则适用于所有租户，请将此字段留空。
+
如果您没有 Root 访问权限或租户帐户权限，则无法从列表中选择租户。相反，输入租户 ID 或以逗号分隔的字符串形式输入多个 ID。

. 或者，指定此规则适用的 S3 存储桶。
+
如果选择“*适用于所有存储桶*”（默认），则该规则适用于所有 S3 存储桶。

. 对于 S3 租户，可选择选择 *是* 将规则仅应用于已启用版本控制的 S3 存储桶中的旧对象版本。
+
如果选择“是”，则将自动选择“非当前时间”作为参考时间link:create-ilm-rule-define-placements.html["创建 ILM 规则向导的第 2 步"]。

+

NOTE: 非当前时间仅适用于启用版本控制的存储桶中的 S3 对象。看link:../s3/operations-on-buckets.html["存储桶上的操作，PutBucketVersioning"]和link:managing-objects-with-s3-object-lock.html["使用 S3 对象锁管理对象"]。

+
您可以使用此选项通过过滤非当前对象版本来减少版本化对象的存储影响。看link:example-4-ilm-rules-and-policy-for-s3-versioned-objects.html["示例 4：S3 版本化对象的 ILM 规则和策略"] 。

. 或者，选择“添加高级过滤器”来指定其他过滤器。
+
如果您未配置高级过滤，则该规则将应用于所有符合基本过滤器的对象。有关高级过滤的更多信息，请参阅<<在 ILM 规则中使用高级过滤器>>和<<指定多种元数据类型和值>>。

. 选择*继续*。link:create-ilm-rule-define-placements.html["第 2 步（定义展示位置）"]出现创建 ILM 规则向导。




== 在 ILM 规则中使用高级过滤器

高级过滤允许您根据元数据创建仅适用于特定对象的 ILM 规则。当您为规则设置高级过滤时，您可以选择要匹配的元数据类型、选择运算符并指定元数据值。评估对象时，ILM 规则仅适用于具有与高级过滤器匹配的元数据的对象。

该表显示了您可以在高级过滤器中指定的元数据类型、您可以对每种元数据类型使用的运算符以及预期的元数据值。

[cols="1a,1a,2a"]
|===
| 元数据类型 | 支持的运算符 | 元数据值 


 a| 
摄取时间
 a| 
* 等于
* 不为
* 之前
* 是在或之前
* 之后
* 是在或之后

 a| 
物体被吞食的时间和日期。

*注意：*为了避免在激活新的 ILM 策略时出现资源问题，您可以在任何可能更改大量现有对象位置的规则中使用摄取时间高级过滤器。将摄取时间设置为大于或等于新策略生效的大致时间，以确保现有对象不会被不必要地移动。



 a| 
键
 a| 
* 等于
* 不等于
* 包含
* 不包含
* 开头为
* 不是以...开头
* 结尾为
* 并不以...结束

 a| 
唯一 S3 对象键的全部或部分。

例如，您可能想要匹配以 `.txt`或者从 `test-object/`。



 a| 
上次访问时间
 a| 
* 等于
* 不为
* 之前
* 是在或之前
* 之后
* 是在或之后

 a| 
上次检索（读取或查看）对象的时间和日期。

*注意：*如果您计划link:using-last-access-time-in-ilm-rules.html["使用上次访问时间"]作为高级过滤器，必须为 S3 存储桶启用上次访问时间更新。



 a| 
位置约束（仅限 S3）
 a| 
* 等于
* 不等于

 a| 
创建 S3 存储桶的区域。使用 *ILM* > *Regions* 来定义显示的区域。

*注意：* us-east-1 的值将匹配在 us-east-1 区域创建的存储桶中的对象以及未指定区域的存储桶中的对象。看link:configuring-regions-optional-and-s3-only.html["配置区域（可选，仅限 S3）"] 。



 a| 
对象大小
 a| 
* 等于
* 不等于
* 小于
* 小于或等于
* 大于
* 大于或等于

 a| 
物体的大小。

擦除编码最适合大于 1 MB 的对象。不要对小于 200 KB 的对象使用擦除编码，以避免管理非常小的擦除编码片段的开销。



 a| 
用户元数据
 a| 
* 包含
* 结尾为
* 等于
* 存在
* 开头为
* 不包含
* 并不以...结束
* 不等于
* 不存在
* 不是以...开头

 a| 
键值对，其中 *用户元数据名称* 是键，*元数据值* 是值。

例如，要筛选具有以下用户元数据的对象 `color=blue`， 指定 `color`对于*用户元数据名称*， `equals`对于操作员来说， `blue`用于*元数据值*。

*注意：*用户元数据名称不区分大小写；用户元数据值区分大小写。



 a| 
对象标签（仅限 S3）
 a| 
* 包含
* 结尾为
* 等于
* 存在
* 开头为
* 不包含
* 并不以...结束
* 不等于
* 不存在
* 不是以...开头

 a| 
键值对，其中*对象标签名称*是键，*对象标签值*是值。

例如，要筛选具有对象标签的对象 `Image=True`， 指定 `Image`对于*对象标签名称*， `equals`对于操作员来说， `True`用于*对象标签值*。

*注意：*对象标签名称和对象标签值区分大小写。您必须准确按照对象的定义输入这些项目。

|===


== 指定多种元数据类型和值

定义高级过滤时，您可以指定多种类型的元数据和多个元数据值。例如，如果您希望规则匹配大小在 10 MB 到 100 MB 之间的对象，则可以选择 *对象大小* 元数据类型并指定两个元数据值。

* 第一个元数据值指定大于或等于 10 MB 的对象。
* 第二个元数据值指定小于或等于 100 MB 的对象。


image::../media/advanced_filtering_size_between.png[对象大小的高级过滤示例]

使用多个条目可以让您精确控制匹配的对象。在以下示例中，该规则适用于以品牌 A 或品牌 B 作为 camera_type 用户元数据的值的对象。不过，该规则仅适用于小于 10 MB 的 B 品牌对象。

image::../media/advanced_filtering_multiple_rows.png[用户元数据的高级过滤示例]
