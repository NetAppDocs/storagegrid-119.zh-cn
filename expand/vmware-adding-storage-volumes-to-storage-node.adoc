---
permalink: expand/vmware-adding-storage-volumes-to-storage-node.html 
sidebar: sidebar 
keywords: expand, expansion, storage node, add storage volumes, VMware 
summary: 如果存储节点包含的存储卷少于 16 个，则可以使用 VMware vSphere 添加卷来增加其容量。 
---
= VMware：将存储卷添加到存储节点
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
如果存储节点包含的存储卷少于 16 个，则可以使用 VMware vSphere 添加卷来增加其容量。

.开始之前
* 您可以访问有关为 VMware 部署安装StorageGRID 的说明。
+
** link:../vmware/index.html["在 VMware 上安装StorageGRID"]


* 你有 `Passwords.txt`文件。
* 你有link:../admin/admin-group-permissions.html["特定访问权限"]。



CAUTION: 当软件升级、恢复过程或其他扩展过程处于活动状态时，请勿尝试将存储卷添加到存储节点。

.关于此任务
添加存储卷时，存储节点短时间内不可用。您应该一次在一个存储节点上执行此过程，以避免影响面向客户端的网格服务。

.步骤
. 如有必要，安装新的存储硬件并创建新的 VMware 数据存储。
. 向虚拟机添加一个或多个硬盘作为存储（对象存储）。
+
.. 打开 VMware vSphere Client。
.. 编辑虚拟机设置以添加一个或多个附加硬盘。


+
硬盘通常配置为虚拟机磁盘 (VMDK)。 VMDK 更常用且更易于管理，而 RDM 可能为使用较大对象大小（例如大于 100 MB）的工作负载提供更好的性能。有关向虚拟机添加硬盘的更多信息，请参阅 VMware vSphere 文档。

. 使用 VMware vSphere Client 中的“*重新启动客户机操作系统*”选项重新启动虚拟机，或者在虚拟机的 ssh 会话中输入以下命令：``sudo reboot``
+

NOTE: 不要使用*关机*或*重置*来重新启动虚拟机。

. 配置新存储以供存储节点使用：
+
.. 登录网格节点：
+
... 输入以下命令： `ssh admin@_grid_node_IP_`
... 输入 `Passwords.txt`文件。
... 输入以下命令切换到root： `su -`
... 输入 `Passwords.txt`文件。当您以 root 身份登录时，提示符将从 `$`到 `#`。


.. 配置新的存储卷：
+
`sudo add_rangedbs.rb`

+
该脚本会查找任何新的存储卷并提示您对其进行格式化。

.. 输入 *y* 接受格式。
.. 如果任何卷之前已被格式化，请决定是否要重新格式化它们。
+
*** 输入 *y* 重新格式化。
*** 输入 *n* 跳过重新格式化。




+
这 `setup_rangedbs.sh`脚本自动运行。

. 检查服务是否正确启动：
+
.. 查看服务器上所有服务的状态列表：
+
`sudo storagegrid-status`

+
状态会自动更新。

.. 等到所有服务都正在运行或已验证。
.. 退出状态屏幕：
+
`Ctrl+C`



. 验证存储节点是否在线：
+
.. Sign inlink:../admin/web-browser-requirements.html["支持的网络浏览器"]。
.. 选择*支持* > *工具* > *网格拓扑*。
.. 选择 *_site_* > *_Storage Node_* > *LDR* > *Storage*。
.. 选择“*配置*”选项卡，然后选择“*主要*”选项卡。
.. 如果“*存储状态 - 所需*”下拉列表设置为“只读”或“离线”，请选择“*在线*”。
.. 选择*应用更改*。


. 要查看新的对象存储：
+
.. 选择 *NODES* > *_site_* > *_Storage Node_* > *Storage*。
.. 查看*对象存储*表中的详细信息。




.结果
您可以使用存储节点的扩展容量来保存对象数据。
