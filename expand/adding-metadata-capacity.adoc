---
permalink: expand/adding-metadata-capacity.html 
sidebar: sidebar 
keywords: metadata capacity, add, adding, expand, expansion, guidelines, Storage Nodes, metadata storage 
summary: 为了确保有足够的空间用于对象元数据，您可能需要执行扩展过程以在每个站点添加新的存储节点。 
---
= 添加元数据容量
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
为了确保有足够的空间用于对象元数据，您可能需要执行扩展过程以在每个站点添加新的存储节点。

StorageGRID在每个存储节点的卷 0 上为对象元数据保留空间。每个站点维护所有对象元数据的三个副本，均匀分布在所有存储节点上。

您可以使用网格管理器来监控存储节点的元数据容量并估计元数据容量的消耗速度。此外，当使用的元数据空间达到某些阈值时，存储节点会触发“元数据存储不足”警报。

请注意，根据您如何使用网格，网格的对象元数据容量可能比其对象存储容量消耗得更快。例如，如果您通常摄取大量小对象或向对象添加大量用户元数据或标签，则可能需要添加存储节点来增加元数据容量，即使剩余足够的对象存储容量。

有关详细信息，请参阅以下内容：

* link:../admin/managing-object-metadata-storage.html["管理对象元数据存储"]
* link:../monitor/monitoring-storage-capacity.html#monitor-object-metadata-capacity-for-each-storage-node["监控每个存储节点的对象元数据容量"]




== 增加元数据容量的指南

在添加存储节点以增加元数据容量之前，请查看以下准则和限制：

* 假设有足够的对象存储容量，那么为对象元数据提供更多可用空间将增加您可以在StorageGRID系统中存储的对象数量。
* 您可以通过向每个站点添加一个或多个存储节点来增加网格的元数据容量。
* 任何给定存储节点上为对象元数据保留的实际空间取决于元数据保留空间存储选项（系统范围设置）、分配给节点的 RAM 量以及节点卷 0 的大小。
* 您无法通过向现有存储节点添加存储卷来增加元数据容量，因为元数据仅存储在卷 0 上。
* 您不能通过添加新站点来增加元数据容量。
* StorageGRID在每个站点保留所有对象元数据的三个副本。因此，系统的元数据容量受到最小站点的元数据容量的限制。
* 添加元数据容量时，应向每个站点添加相同数量的存储节点。


仅元数据存储节点具有特定的硬件要求：

* 使用StorageGRID设备时，只能在具有 12 个 1.9 TB 或 12 个 3.8 TB 驱动器的 SGF6112 设备上配置仅元数据节点。
* 使用基于软件的节点时，仅元数据节点资源必须与现有的存储节点资源相匹配。例如：
+
** 如果现有StorageGRID站点使用 SG6000 或 SG6100 设备，则基于软件的仅元数据节点必须满足以下最低要求：
+
*** 128 GB 内存
*** 8核CPU
*** 8 TB SSD 或用于 Cassandra 数据库的等效存储空间（rangedb/0）


** 如果现有的StorageGRID站点使用具有 24 GB RAM、8 核 CPU 和 3 TB 或 4TB 元数据存储的虚拟存储节点，则基于软件的仅元数据节点应使用类似的资源（24 GB RAM、8 核 CPU 和 4TB 元数据存储（rangedb/0）。


* 添加新的StorageGRID站点时，新站点的总元数据容量至少应与现有StorageGRID站点相匹配，并且新站点资源应与现有StorageGRID站点的存储节点相匹配。


查看link:../admin/managing-object-metadata-storage.html["元数据保留空间的描述"]。



== 添加存储节点时如何重新分配元数据

当您在扩展中添加存储节点时， StorageGRID会将现有对象元数据重新分配到每个站点的新节点，从而增加网格的整体元数据容量。无需用户操作。

下图显示了在扩展中添加存储节点时StorageGRID如何重新分配对象元数据。图的左侧表示扩展前的三个存储节点的卷 0。元数据正在消耗每个节点可用元数据空间的相对较大的一部分，并且已触发*低元数据存储*警报。

图的右侧显示了在站点中添加两个存储节点后，现有元数据如何重新分布。每个节点上的元数据量减少了，不再触发*低元数据存储*警报，并且可用于元数据的空间增加了。

image::../media/metadata_space_after_expansion.png[添加两个存储节点后重新分配元数据的示意图]
