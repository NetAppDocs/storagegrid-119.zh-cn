= 我应该使用哪种程序？
:allow-uri-read: 




== 我应该使用哪种程序？

只要有可能，就使用网格管理器中的*体积恢复*页面恢复对象数据。

* 如果卷列在 *维护* > *卷恢复* > *要恢复的节点* 中，请使用link:../maintain/restoring-volume.html["网格管理器中的卷恢复页面"]。
* 如果卷未在“*维护* > *卷恢复* > *要恢复的节点*”中列出，请按照以下步骤使用 `repair-data`脚本来恢复对象数据。
+
如果恢复的存储节点包含的卷少于它所替换的节点，则必须使用 `repair-data`脚本。




NOTE: 修复数据脚本已弃用，并将在未来版本中删除。如果可能，请使用link:../maintain/restoring-volume.html["网格管理器中的卷恢复过程"]。



== 使用 `repair-data`恢复对象数据的脚本

.开始之前
* 您已确认恢复的存储节点的连接状态为*已连接*image:../media/icon_alert_green_checkmark.png["图标警报绿色复选标记"]在网格管理器中的 *NODES* > *Overview* 选项卡上。


.关于此任务
假设网格的 ILM 规则已配置为可以使用对象副本，则可以从其他存储节点或云存储池恢复对象数据。

请注意以下事项：

* 如果 ILM 规则配置为仅存储一个复制副本，并且该副本存在于发生故障的存储卷上，则您将无法恢复该对象。
* 如果对象的唯一剩余副本位于云存储池中，StorageGRID必须向云存储池端点发出多个请求来恢复对象数据。在执行此过程之前，请联系技术支持以获取帮助，以估计恢复时间范围和相关成本。




== 关于 `repair-data`脚本

要恢复对象数据，请运行 `repair-data`脚本。该脚本开始恢复对象数据的过程并与 ILM 扫描配合使用以确保满足 ILM 规则。

选择下面的*复制数据*或*擦除编码 (EC) 数据*来了解不同的选项 `repair-data`脚本，取决于您要恢复复制的数据还是擦除编码的数据。如果需要恢复两种类型的数据，则必须运行两组命令。


NOTE: 有关 `repair-data`脚本，输入 `repair-data --help`从主管理节点的命令行。


NOTE: 修复数据脚本已弃用，并将在未来版本中删除。如果可能，请使用link:../maintain/restoring-volume.html["网格管理器中的卷恢复过程"]。

[role="tabbed-block"]
====
.复制数据
--
根据您是否需要修复整个节点或仅修复节点上的某些卷，有两个命令可用于恢复复制的数据：

`repair-data start-replicated-node-repair`

`repair-data start-replicated-volume-repair`

您可以使用以下命令跟踪复制数据的修复：

`repair-data show-replicated-repair-status`

--
.擦除编码 (EC) 数据
--
根据您是否需要修复整个节点或仅修复节点上的某些卷，有两个命令可用于恢复擦除编码数据：

`repair-data start-ec-node-repair`

`repair-data start-ec-volume-repair`

您可以使用以下命令跟踪擦除编码数据的修复：

`repair-data show-ec-repair-status`


NOTE: 当某些存储节点处于离线状态时，可以开始修复擦除编码数据。然而，如果无法解释所有擦除编码数据，则无法完成修复。所有节点可用后修复将完成。


NOTE: EC修复工作暂时预留了大量存储空间。存储警报可能会被触发，但修复完成后就会解决。如果没有足够的存储空间用于预留，EC 修复作业将会失败。无论 EC 修复作业失败还是成功，存储预留都会在作业完成时释放。

--
====