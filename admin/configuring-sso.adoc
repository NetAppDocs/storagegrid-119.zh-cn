---
permalink: admin/configuring-sso.html 
sidebar: sidebar 
keywords: configure single sign on, sso, SAML 
summary: '启用单点登录 (SSO) 后，用户只有在其凭据使用贵组织实施的 SSO 登录流程获得授权的情况下，才可以访问网格管理器、租户管理器、网格管理 API 或租户管理 API。本地用户无法登录StorageGRID。' 
---
= 配置单点登录
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
启用单点登录 (SSO) 后，只有使用贵组织实施的 SSO 登录流程授权用户的凭据，用户才能访问网格管理器、租户管理器、网格管理 API 或租户管理 API。本地用户无法登录StorageGRID。



== 单点登录的工作原理

StorageGRID系统支持使用安全断言标记语言 2.0 (SAML 2.0) 标准的单点登录 (SSO)。

在启用单点登录 (SSO) 之前，请查看启用 SSO 时StorageGRID登录和注销过程会受到怎样的影响。



=== 启用 SSO 后Sign in

当启用 SSO 并且您登录到StorageGRID时，您将被重定向到您组织的 SSO 页面以验证您的凭据。

.步骤
. 在 Web 浏览器中输入任何StorageGRID管理节点的完全限定域名或 IP 地址。
+
出现StorageGRIDSign in页面。

+
** 如果这是您第一次在此浏览器上访问该 URL，系统会提示您输入帐户 ID：
+
image::../media/sso_sign_in_first_time.png[首次访问时启用 SSOSign in]

** 如果您之前访问过网格管理器或租户管理器，系统将提示您选择最近的帐户或输入帐户 ID：
+
image::../media/sign_in_sso.png[如果启用了 SSO，则显示StorageGRID登录页面]



+

NOTE: 当您Sign in租户帐户的完整 URL（即完全限定域名或 IP 地址，后跟 `/?accountId=_20-digit-account-id_`）。相反，您会立即被重定向到您组织的 SSO 登录页面，您可以在此<<signin_sso,使用您的 SSO 凭据登录>>。

. 指示您是否要访问网格管理器或租户管理器：
+
** 要访问网格管理器，请将“*帐户 ID*”字段留空，输入“*0*”作为帐户 ID，或者选择“*网格管理器*”（如果它出现在最近的帐户列表中）。
** 要访问租户管理器，请输入 20 位租户帐户 ID，或按名称选择最近帐户列表中出现的租户。


. 选择 *Sign in*
+
StorageGRID将您重定向到您组织的 SSO 登录页面。例如：

+
image::../media/sso_organization_page.gif[SSO 的示例组织登录页面]

. [[signin_sso]] 使用您的 SSO 凭据Sign in。
+
如果您的 SSO 凭据正确：

+
.. 身份提供者 (IdP) 向StorageGRID提供身份验证响应。
.. StorageGRID验证身份验证响应。
.. 如果响应有效并且您属于具有StorageGRID访问权限的联合组，您将登录到网格管理器或租户管理器，具体取决于您选择的帐户。
+

NOTE: 如果服务帐户无法访问，您仍然可以登录，只要您是属于具有StorageGRID访问权限的联合组的现有用户。



. 或者，如果您有足够的权限，可以访问其他管理节点，或者访问网格管理器或租户管理器。
+
您不需要重新输入您的 SSO 凭据。





=== 启用 SSO 后退出

当为StorageGRID启用 SSO 时，您注销时发生的情况取决于您登录的内容以及您从哪里注销。

.步骤
. 找到用户界面右上角的“*退出*”链接。
. 选择“*退出*”。
+
出现StorageGRIDSign in页面。  *最近的帐户*下拉菜单已更新，包括*网格管理器*或租户的名称，因此您将来可以更快地访问这些用户界面。

+
[cols="1a,1a,1a"]
|===
| 如果您已登录... | 然后您退出... | 您已退出... 


 a| 
一个或多个管理节点上的网格管理器
 a| 
任何管理节点上的网格管理器
 a| 
所有管理节点上的网格管理器

*注意：*如果您使用 Azure 进行 SSO，则可能需要几分钟才能退出所有管理节点。



 a| 
一个或多个管理节点上的租户管理器
 a| 
任何管理节点上的租户管理器
 a| 
所有管理节点上的租户管理器



 a| 
网格管理器和租户管理器
 a| 
网格管理器
 a| 
仅限网格管理器。您还必须退出租户管理器才能退出 SSO。



 a| 
租户经理
 a| 
仅限租户经理。您还必须退出网格管理器才能退出 SSO。

|===



NOTE: 该表总结了当您使用单个浏览器会话时注销时发生的情况。如果您通过多个浏览器会话登录到StorageGRID ，则必须分别退出所有浏览器会话。
