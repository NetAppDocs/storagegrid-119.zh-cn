---
permalink: admin/configure-vlan-interfaces.html 
sidebar: sidebar 
keywords: how to configure vlan interfaces, vlan interfaces, trunk interface 
summary: '您可以在管理节点和网关节点上创建虚拟 LAN \(VLAN\) 接口，并在 HA 组和负载均衡器端点中使用它们来隔离和分区流量，从而实现安全性、灵活性和性能。' 
---
= 配置VLAN接口
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以在管理节点和网关节点上创建虚拟 LAN (VLAN) 接口，并在 HA 组和负载均衡器端点中使用它们来隔离和分区流量，从而实现安全性、灵活性和性能。



== VLAN 接口的注意事项

* 您可以通过输入 VLAN ID 并在一个或多个节点上选择父接口来创建 VLAN 接口。
* 必须在交换机上将父接口配置为中继接口。
* 父接口可以是网格网络（eth0）、客户端网络（eth2）或虚拟机或裸机主机的附加中继接口（例如，ens256）。
* 对于每个 VLAN 接口，您只能为给定节点选择一个父接口。例如，您不能将同一网关节点上的网格网络接口和客户端网络接口同时用作同一 VLAN 的父接口。
* 如果 VLAN 接口用于管理节点流量（包括与网格管理器和租户管理器相关的流量），则仅选择管理节点上的接口。
* 如果 VLAN 接口用于 S3 客户端流量，请选择管理节点或网关节点上的接口。
* 如果需要添加Trunk接口，请参见以下内容：
+
** *VMware（安装节点后）*：link:../maintain/vmware-adding-trunk-or-access-interfaces-to-node.html["VMware：向节点添加中继或访问接口"]
** *RHEL（安装节点之前）*：link:../rhel/creating-node-configuration-files.html["创建节点配置文件"]
** *Ubuntu 或 Debian（安装节点之前）*：link:../ubuntu/creating-node-configuration-files.html["创建节点配置文件"]
** *RHEL、Ubuntu 或 Debian（安装节点后）*：link:../maintain/linux-adding-trunk-or-access-interfaces-to-node.html["Linux：向节点添加主干或访问接口"]






== 创建 VLAN 接口

.开始之前
* 您已使用link:../admin/web-browser-requirements.html["支持的网络浏览器"]。
* 你有link:admin-group-permissions.html["Root访问权限"]。
* 网络中已配置中继接口并将其连接到 VM 或 Linux 节点。您知道中继接口的名称。
* 您知道正在配置的 VLAN 的 ID。


.关于此任务
您的网络管理员可能已配置一个或多个中继接口和一个或多个 VLAN 来隔离属于不同应用程序或租户的客户端或管理流量。每个 VLAN 由数字 ID 或标签标识。例如，您的网络可能使用 VLAN 100 来传输FabricPool流量，使用 VLAN 200 来传输存档应用程序。

您可以使用网格管理器创建 VLAN 接口，允许客户端访问特定 VLAN 上的StorageGRID 。创建 VLAN 接口时，您可以指定 VLAN ID 并在一个或多个节点上选择父（中继）接口。



=== 访问向导

.步骤
. 选择 *配置* > *网络* > *VLAN 接口*。
. 选择“*创建*”。




=== 输入 VLAN 接口的详细信息

.步骤
. 指定网络中 VLAN 的 ID。您可以输入 1 到 4094 之间的任意值。
+
VLAN ID 不需要是唯一的。例如，您可能在一个站点上使用 VLAN ID 200 来传输管理流量，而在另一个站点上使用相同的 VLAN ID 来传输客户端流量。您可以在每个站点创建具有不同父接口集的单独 VLAN 接口。但是，两个具有相同 ID 的 VLAN 接口不能共享同一节点上的同一个接口。如果您指定的 ID 已被使用，则会出现一条消息。

. 或者，输入 VLAN 接口的简短描述。
. 选择*继续*。




=== 选择父接口

该表列出了网格中每个站点的所有管理节点和网关节点的可用接口。管理网络（eth1）接口不能用作父接口，因此不会显示。

.步骤
. 选择一个或多个要将此 VLAN 附加到的父接口。
+
例如，您可能希望将 VLAN 附加到网关节点和管理节点的客户端网络 (eth2) 接口。

+
image::../media/vlan-create-parent-interfaces.png[VLAN 创建向导父接口]

. 选择*继续*。




=== 确认设置

.步骤
. 检查配置并进行任何更改。
+
** 如果需要更改 VLAN ID 或描述，请选择页面顶部的 *输入 VLAN 详细信息*。
** 如果需要更改父接口，请选择页面顶部的*选择父接口*或选择*上一个*。
** 如果需要删除父接口，请选择垃圾桶image:../media/icon-trash-can.png["垃圾桶图标"]。


. 选择*保存*。
. 等待最多 5 分钟，新的接口才会作为选择出现在“高可用性组”页面上，并列在节点的 *网络接口* 表中（*NODES* > *_parent interface node_* > *Network*）。




== 编辑 VLAN 接口

编辑 VLAN 接口时，您可以进行以下类型的更改：

* 更改 VLAN ID 或描述。
* 添加或删除父接口。


例如，如果您计划停用关联节点，则可能需要从 VLAN 接口中删除父接口。

请注意以下事项：

* 如果 VLAN 接口在 HA 组中使用，则无法更改 VLAN ID。
* 如果父接口在 HA 组中使用，则您无法删除该父接口。
+
例如，假设 VLAN 200 连接到节点 A 和 B 上的父接口。如果 HA 组对节点 A 使用 VLAN 200 接口，对节点 B 使用 eth2 接口，则可以删除节点 B 未使用的父接口，但不能删除节点 A 已使用的父接口。



.步骤
. 选择 *配置* > *网络* > *VLAN 接口*。
. 选中要编辑的 VLAN 接口的复选框。然后，选择*操作* > *编辑*。
. 或者，更新 VLAN ID 或描述。然后，选择*继续*。
+
如果 VLAN 在 HA 组中使用，则无法更新 VLAN ID。

. 或者，选择或清除复选框以添加父接口或删除未使用的接口。然后，选择*继续*。
. 检查配置并进行任何更改。
. 选择*保存*。




== 删除 VLAN 接口

您可以删除一个或多个 VLAN 接口。

如果 VLAN 接口当前在 HA 组中使用，则无法删除它。您必须先从 HA 组中删除 VLAN 接口，然后才能将其删除。

为了避免客户端流量中断，请考虑执行以下操作之一：

* 删除此 VLAN 接口之前，请先将新的 VLAN 接口添加到 HA 组。
* 创建不使用此 VLAN 接口的新 HA 组。
* 如果要删除的 VLAN 接口当前是活动接口，请编辑 HA 组。将要删除的 VLAN 接口移至优先级列表的底部。等待新的主接口上建立通信，然后从 HA 组中删除旧接口。最后，删除该节点上的 VLAN 接口。


.步骤
. 选择 *配置* > *网络* > *VLAN 接口*。
. 选中要删除的每个 VLAN 接口的复选框。然后，选择*操作* > *删除*。
. 选择“是”确认您的选择。
+
您选择的所有 VLAN 接口都将被删除。  VLAN 接口页面上会出现绿色的成功横幅。


