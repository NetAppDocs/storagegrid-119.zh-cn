---
permalink: maintain/stopping-services-and-shutting-down-grid-nodes.html 
sidebar: sidebar 
keywords: recover, stop services, shut down nodes, node shutdown 
summary: 在关闭StorageGRID系统之前，您必须停止每个网格节点上运行的所有服务，然后关闭所有 VMware 虚拟机、容器引擎和StorageGRID设备。 
---
= 停止服务并关闭网格节点
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
在关闭StorageGRID系统之前，您必须停止每个网格节点上运行的所有服务，然后关闭所有 VMware 虚拟机、容器引擎和StorageGRID设备。

.关于此任务
首先停止管理节点和网关节点上的服务，然后停止存储节点上的服务。

这种方法允许您使用主管理节点尽可能长时间地监视其他网格节点的状态。


NOTE: 如果单个主机包含多个网格节点，请不要关闭该主机，直到停止该主机上的所有节点。如果主机包含主管理节点，则最后关闭该主机。


NOTE: 如果需要，您可以link:linux-migrating-grid-node-to-new-host.html["将节点从一个 Linux 主机迁移到另一个 Linux 主机"]执行主机维护而不影响网格的功能或可用性。

.步骤
. 停止所有客户端应用程序访问网格。
. [[log_in_to_gn]]登录每个网关节点：
+
.. 输入以下命令： `ssh admin@_grid_node_IP_`
.. 输入 `Passwords.txt`文件。
.. 输入以下命令切换到root： `su -`
.. 输入 `Passwords.txt`文件。
+
当您以 root 身份登录时，提示符将从 `$`到 `#`。



. [[stop_all_services]]停止节点上运行的所有服务： `service servermanager stop`
+
服务最多可能需要 15 分钟才能关闭，您可能需要远程登录系统来监控关闭过程。



. 重复前两个步骤，停止所有存储节点和非主管理节点上的服务。
+
您可以按任意顺序停止这些节点上的服务。

+

NOTE: 如果你发出 `service servermanager stop`命令停止设备存储节点上的服务，您必须关闭设备电源并重新启动该节点。

. 对于主管理节点，重复以下步骤<<log_in_to_gn,登录节点>>和<<stop_all_services,停止节点上的所有服务>>。
. 对于在 Linux 主机上运行的节点：
+
.. 登录主机操作系统。
.. 停止节点： `storagegrid node stop`
.. 关闭主机操作系统。


. 对于在 VMware 虚拟机上运行的节点和设备存储节点，发出关机命令： `shutdown -h now`
+
无论结果如何，都执行此步骤 `service servermanager stop`命令。

+
对于设备，此命令关闭计算控制器，但设备仍处于开启状态。您必须完成下一步。

. 如果您有设备节点：
+
** 适用于服务设备或 SGF6112 设备
+
... 关闭设备电源。
... 等待蓝色电源 LED 熄灭。


** 对于 SG6160 设备
+
... 关闭 SG6100-CN 存储控制器的电源。
... 等待 SG6100-CN 存储控制器上的蓝色电源 LED 熄灭。


** 对于 SG6000 设备
+
... 等待存储控制器背面的绿色缓存活动 LED 熄灭。
+
当需要将缓存数据写入驱动器时，此 LED 亮起。您必须等待此 LED 熄灭后才能关闭电源。

... 关闭设备电源，等待蓝色电源 LED 熄灭。


** 对于 SG5800 设备
+
... 等待存储控制器背面的绿色缓存活动 LED 熄灭。
+
当需要将缓存数据写入驱动器时，此 LED 亮起。您必须等待此 LED 熄灭后才能关闭电源。

... 从SANtricity System Manager 主页中，选择 *查看正在进行的操作*。
... 确认所有操作均已完成，然后再继续下一步。
... 关闭控制器架上的两个电源开关，并等待控制器架上的所有 LED 熄灭。


** 对于 SG5700 设备
+
... 等待存储控制器背面的绿色缓存活动 LED 熄灭。
+
当需要将缓存数据写入驱动器时，此 LED 亮起。您必须等待此 LED 熄灭后才能关闭电源。

... 关闭设备电源，等待所有 LED 和七段显示活动停止。




. 如果需要，请退出命令 shell： `exit`
+
StorageGRID网格现已关闭。



.相关信息
* link:https://docs.netapp.com/us-en/storagegrid-appliances/sg6100/index.html["SGF6112和SG6160存储设备"^]
* link:https://docs.netapp.com/us-en/storagegrid-appliances/sg6000/index.html["SG6000存储设备"^]
* link:https://docs.netapp.com/us-en/storagegrid-appliances/sg5800/index.html["SG5800存储设备"^]
* link:https://docs.netapp.com/us-en/storagegrid-appliances/sg5700/index.html["SG5700存储设备"^]
* link:https://docs.netapp.com/us-en/storagegrid-appliances/sg110-1100/index.html["SG110 和 SG1100 服务设备"^]
* link:https://docs.netapp.com/us-en/storagegrid-appliances/sg100-1000/index.html["SG100 和 SG1000 服务设备"^]

