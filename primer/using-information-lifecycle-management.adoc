---
permalink: primer/using-information-lifecycle-management.html 
sidebar: sidebar 
keywords: what is information lifecycle management, how to use ilm 
summary: '您可以使用信息生命周期管理 (ILM) 来控制StorageGRID系统中所有对象的放置、持续时间和摄取行为。ILM 规则决定了StorageGRID如何随时间存储对象。您可以配置一个或多个 ILM 规则，然后将它们添加到 ILM 策略。' 
---
= 信息生命周期管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用信息生命周期管理 (ILM) 来控制StorageGRID系统中所有对象的放置、持续时间和摄取行为。ILM 规则决定了StorageGRID如何随时间存储对象。您可以配置一个或多个 ILM 规则，然后将它们添加到 ILM 策略。

一个网格每次只能有一个活动策略。一个策略可以包含多个规则。

ILM 规则定义：

* 应该存储哪些对象。规则可以应用于所有对象，或者您可以指定过滤器来确定规则适用于哪些对象。例如，规则只能应用于与某些租户帐户、特定 S3 存储桶或 Swift 容器或特定元数据值相关联的对象。
* 存储类型和位置。对象可以存储在存储节点或云存储池中。
* 所复制的对象类型。副本可以被复制或擦除编码。
* 对于复制的副本，表示所制作的副本数量。
* 对于擦除编码副本，使用擦除编码方案。
* 对象的存储位置和副本类型随时间的变化。
* 当对象被纳入网格（同步放置或双重提交）时，如何保护对象数据。


请注意，对象元数据不受 ILM 规则管理。相反，对象元数据存储在 Cassandra 数据库中，即所谓的元数据存储。每个站点都会自动维护三个对象元数据副本，以防止数据丢失。



== ILM 规则示例

例如，ILM 规则可以指定以下内容：

* 仅适用于属于租户 A 的对象。
* 制作这些对象的两个副本，并将每个副本存储在不同的站点。
* “永久”保留这两个副本，这意味着StorageGRID不会自动删除它们。相反， StorageGRID将保留这些对象，直到它们被客户端删除请求或存储桶生命周期到期删除。
* 使用平衡选项进行摄取行为：一旦租户 A 将对象保存到StorageGRID，就会应用双站点放置指令，除非无法立即制作两个所需的副本。
+
例如，如果租户 A 保存对象时站点 2 无法访问，则StorageGRID将在站点 1 的存储节点上制作两个临时副本。一旦站点 2 可用， StorageGRID将在该站点制作所需的副本。





== ILM 策略如何评估对象

StorageGRID系统的活动 ILM 策略控制所有对象的放置、持续时间和摄取行为。

当客户端将对象保存到StorageGRID时，将根据活动策略中的有序 ILM 规则集对对象进行评估，如下所示：

. 如果策略中第一个规则的过滤器与某个对象匹配，则该对象将根据该规则的摄取行为进行摄取，并根据该规则的放置说明进行存储。
. 如果第一条规则的过滤器与对象不匹配，则根据策略中的每个后续规则评估该对象，直到匹配为止。
. 如果没有规则与对象匹配，则应用策略中默认规则的摄取行为和放置说明。默认规则是策略中的最后一条规则，不能使用任何过滤器。它必须适用于所有租户、所有存储桶和所有对象版本。




== ILM 策略示例

例如，ILM 策略可能包含三个 ILM 规则，指定以下内容：

* *规则 1：为租户 A 复制副本*
+
** 匹配属于租户 A 的所有对象。
** 将这些对象作为三个副本存储在三个站点。
** 属于其他租户的对象不符合规则 1，因此根据规则 2 对它们进行评估。


* 规则 2：对大于 1 MB 的对象进行擦除编码
+
** 匹配来自其他租户的所有对象，但前提是它们大于 1 MB。这些较大的对象使用 6+3 擦除编码存储在三个站点。
** 与 1 MB 或更小的对象不匹配，因此这些对象根据规则 3 进行评估。


* *规则 3：2 个副本 2 个数据中心*（默认）
+
** 是策略中的最后一条规则，也是默认规则。不使用过滤器。
** 对不符合规则 1 或规则 2 的所有对象（不属于租户 A 且大小为 1 MB 或更小的对象）制作两个副本。




image::../media/ilm_policy_and_rules.png[ILM 政策和规则]

.相关信息
* link:../ilm/index.html["使用 ILM 管理对象"]

