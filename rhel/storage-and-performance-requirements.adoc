---
permalink: rhel/storage-and-performance-requirements.html 
sidebar: sidebar 
keywords: red hat linux storage requirements, performance requirements host storage, host volumes, netapp ontap, fabricpool 
summary: 您必须了解StorageGRID节点的存储要求，以便提供足够的空间来支持初始配置和未来的存储扩展。 
---
= 存储和性能要求
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您必须了解StorageGRID节点的存储要求，以便提供足够的空间来支持初始配置和未来的存储扩展。

StorageGRID节点需要三种逻辑类别的存储：

* *容器池*——节点容器的性能层（10K SAS 或 SSD）存储，当您在支持StorageGRID节点的主机上安装和配置容器引擎时，它将分配给容器引擎存储驱动程序。
* *系统数据*——性能层（10K SAS 或 SSD）存储，用于每个节点持久存储系统数据和事务日志， StorageGRID主机服务将使用这些数据并映射到各个节点。
* *对象数据*——性能层（10K SAS 或 SSD）存储和容量层（NL-SAS/SATA）大容量存储，用于持久存储对象数据和对象元数据。


您必须对所有存储类别使用 RAID 支持的块设备。不支持非冗余磁盘、SSD 或 JBOD。您可以将共享或本地 RAID 存储用于任何存储类别；但是，如果您想使用StorageGRID中的节点迁移功能，则必须将系统数据和对象数据都存储在共享存储上。有关更多信息，请参阅link:node-container-migration-requirements.html["节点容器迁移要求"] 。



== 性能要求

用于容器池、系统数据和对象元数据的卷的性能会显著影响系统的整体性能。您应该对这些卷使用性能层（10K SAS 或 SSD）存储，以确保在延迟、每秒输入/输出操作数 (IOPS) 和吞吐量方面具有足够的磁盘性能。您可以使用容量层（NL-SAS/SATA）存储来持久存储对象数据。

用于容器池、系统数据和对象数据的卷必须启用回写缓存。缓存必须位于受保护或持久的媒体上。



== 使用NetApp ONTAP存储的主机的要求

如果StorageGRID节点使用从NetApp ONTAP系统分配的存储，请确认该卷未启用FabricPool分层策略。禁用与StorageGRID节点一起使用的卷的FabricPool分层可简化故障排除和存储操作。


NOTE: 切勿使用FabricPool将与StorageGRID相关的任何数据分层回StorageGRID本身。将StorageGRID数据分层回StorageGRID会增加故障排除和操作的复杂性。



== 所需主机数量

每个StorageGRID站点至少需要三个存储节点。


NOTE: 在生产部署中，不要在单个物理或虚拟主机上运行多个存储节点。为每个存储节点使用专用主机可提供隔离的故障域。

其他类型的节点，例如管理节点或网关节点，可以部署在同一主机上，也可以根据需要部署在各自的专用主机上。



== 每个主机的存储卷数量

下表显示了每个主机所需的存储卷 (LUN) 数量以及每个 LUN 所需的最小大小（取决于将在该主机上部署哪些节点）。

测试的最大 LUN 大小为 39 TB。


NOTE: 这些数字针对的是每个主机，而不是整个网格。

|===
| LUN 用途 | 存储类别 | LUN数量 | 最小大小/LUN 


 a| 
容器引擎存储池
 a| 
集装箱池
 a| 
1
 a| 
总节点数×100GB



 a| 
`/var/local`体积
 a| 
系统数据
 a| 
此主机上的每个节点 1 个
 a| 
90 GB



 a| 
存储节点
 a| 
对象数据
 a| 
此主机上的每个存储节点 3 个

*注意：*基于软件的存储节点可以有 1 到 48 个存储卷；建议至少有 3 个存储卷。
 a| 
12 TB（4 TB/LUN）参见<<storage_req_SN,存储节点的存储要求>>了解更多信息。



 a| 
存储节点（仅元数据）
 a| 
对象元数据
 a| 
1
 a| 
4 TB 参见<<storage_req_SN,存储节点的存储要求>>了解更多信息。

*注意*：仅元数据存储节点只需要一个 rangedb。



 a| 
管理节点审计日志
 a| 
系统数据
 a| 
此主机上的每个管理节点 1 个
 a| 
200 GB



 a| 
管理节点表
 a| 
系统数据
 a| 
此主机上的每个管理节点 1 个
 a| 
200 GB

|===

NOTE: 根据配置的审计级别、用户输入的大小（例如 S3 对象密钥名称）以及需要保留的审计日志数据量，您可能需要增加每个管理节点上审计日志 LUN 的大小。通常，网格每个 S3 操作会生成大约 1 KB 的审计数据，这意味着 200 GB 的 LUN 可以在两到三天内支持每天 7000 万次操作或每秒 800 次操作。



== 主机的最小存储空间

下表显示了每种类型的节点所需的最小存储空间。您可以使用此表来确定必须为每个存储类别中的主机提供的最小存储量，具体取决于将在该主机上部署哪些节点。


NOTE: 磁盘快照不能用于恢复网格节点。相反，请参阅link:../maintain/warnings-and-considerations-for-grid-node-recovery.html["网格节点恢复"]针对每种类型的节点的程序。

|===
| 节点类型 | 集装箱池 | 系统数据 | 对象数据 


| 存储节点  a| 
100 GB
 a| 
90 GB
 a| 
4,000 GB



 a| 
管理节点
 a| 
100 GB
 a| 
490 GB（3 个 LUN）
 a| 
_不适用_



 a| 
网关节点
 a| 
100 GB
 a| 
90 GB
 a| 
_不适用_

|===


== 示例：计算主机的存储需求

假设您计划在同一主机上部署三个节点：一个存储节点、一个管理节点和一个网关节点。您应该向主机提供至少九个存储卷。您将需要至少 300 GB 的性能层存储用于节点容器，670 GB 的性能层存储用于系统数据和事务日志，以及 12 TB 的容量层存储用于对象数据。

|===
| 节点类型 | LUN 用途 | LUN数量 | LUN 大小 


| 存储节点  a| 
容器引擎存储池
 a| 
1
 a| 
300 GB（100 GB/节点）



 a| 
存储节点
 a| 
`/var/local`体积
 a| 
1
 a| 
90 GB



| 存储节点  a| 
对象数据
 a| 
3
 a| 
12 TB（4 TB/LUN）



 a| 
管理节点
 a| 
`/var/local`体积
 a| 
1
 a| 
90 GB



| 管理节点  a| 
管理节点审计日志
 a| 
1
 a| 
200 GB



| 管理节点  a| 
管理节点表
 a| 
1
 a| 
200 GB



 a| 
网关节点
 a| 
`/var/local`体积
 a| 
1
 a| 
90 GB



 a| 
*全部的*
 a| 
 a| 
*9*
 a| 
*容器池：* 300 GB

*系统数据：* 670 GB

*对象数据：* 12,000 GB

|===


== 存储节点的存储要求

基于软件的存储节点可以有 1 到 48 个存储卷；建议使用 3 个或更多存储卷。每个存储卷应为 4 TB 或更大。


NOTE: 设备存储节点还可以拥有最多 48 个存储卷。

如图所示， StorageGRID在每个存储节点的存储卷 0 上为对象元数据保留空间。存储卷 0 上的任何剩余空间以及存储节点中的任何其他存储卷均专门用于对象数据。

image::../media/metadata_space_storage_node.png[元数据空间存储节点]

为了提供冗余并保护对象元数据免于丢失， StorageGRID在每个站点存储系统中所有对象的元数据的三个副本。对象元数据的三个副本均匀分布在每个站点的所有存储节点上。

当安装仅具有元数据存储节点的网格时，该网格还必须包含用于对象存储的最小数量的节点。看link:../primer/what-storage-node-is.html#types-of-storage-nodes["存储节点的类型"]有关仅元数据存储节点的更多信息。

* 对于单站点网格，至少配置两个存储节点用于对象和元数据。
* 对于多站点网格，每个站点至少配置一个存储节点来存储对象和元数据。


当您为新存储节点的卷 0 分配空间时，必须确保有足够的空间容纳该节点的所有对象元数据部分。

* 您必须至少为卷 0 分配至少 4 TB。
+

NOTE: 如果您仅为存储节点使用一个存储卷，并且为该卷分配 4 TB 或更少的容量，则存储节点可能会在启动时进入存储只读状态并仅存储对象元数据。

+

NOTE: 如果您为卷 0（仅非生产用途）分配少于 500 GB 的空间，则存储卷容量的 10% 将保留用于元数据。

* 基于软件的纯元数据节点资源必须与现有的存储节点资源相匹配。例如：
+
** 如果现有StorageGRID站点使用 SG6000 或 SG6100 设备，则基于软件的仅元数据节点必须满足以下最低要求：
+
*** 128 GB 内存
*** 8核CPU
*** 8 TB SSD 或用于 Cassandra 数据库的等效存储空间（rangedb/0）


** 如果现有的StorageGRID站点使用具有 24 GB RAM、8 核 CPU 和 3 TB 或 4TB 元数据存储的虚拟存储节点，则基于软件的仅元数据节点应使用类似的资源（24 GB RAM、8 核 CPU 和 4TB 元数据存储（rangedb/0）。
+
添加新的StorageGRID站点时，新站点的总元数据容量至少应与现有StorageGRID站点相匹配，并且新站点资源应与现有StorageGRID站点的存储节点相匹配。



* 如果您正在安装新系统（StorageGRID 11.6 或更高版本）并且每个存储节点都有 128 GB 或更多的 RAM，请为卷 0 分配 8 TB 或更多。对卷 0 使用较大的值可以增加每个存储节点上元数据允许的空间。
* 为站点配置不同的存储节点时，如果可能，请对卷 0 使用相同的设置。如果站点包含不同大小的存储节点，则具有最小卷 0 的存储节点将决定该站点的元数据容量。


欲了解详情，请访问link:../admin/managing-object-metadata-storage.html["管理对象元数据存储"]。
