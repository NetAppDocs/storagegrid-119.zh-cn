---
permalink: troubleshoot/troubleshooting-syslog-server.html 
sidebar: sidebar 
keywords: how to troubleshoot the external syslog server 
summary: 下表描述了可能与外部系统日志服务器相关的错误消息并列出了纠正措施。 
---
= 排除外部系统日志服务器故障
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
下表描述了可能与外部系统日志服务器相关的错误消息并列出了纠正措施。

如果您在发送测试消息以验证外部系统日志服务器是否正确配置时遇到问题，则配置外部系统日志服务器向导会显示这些错误。

运行时问题可能会由link:../monitor/alerts-reference.html#audit-and-syslog-alerts["外部系统日志服务器转发错误"]警报。如果您收到此警报，请按照警报中的说明重新发送测试消息，以便您可以获得详细的错误消息。

有关将审计信息发送到外部系统日志服务器的更多信息，请参见：

* link:../monitor/considerations-for-external-syslog-server.html["使用外部系统日志服务器的注意事项"]
* link:../monitor/configure-audit-messages.html["配置审计消息和外部系统日志服务器"]


[cols="1a,3a"]
|===
| 错误消息 | 描述和建议的操作 


 a| 
无法解析主机名
 a| 
您为 syslog 服务器输入的 FQDN 无法解析为 IP 地址。

. 检查您输入的主机名。如果您输入了 IP 地址，请确保它是 WXYZ（“点分十进制”）表示法的有效 IP 地址。
. 检查 DNS 服务器是否配置正确。
. 确认每个节点都可以访问 DNS 服务器的 IP 地址。




 a| 
连接被拒绝
 a| 
与系统日志服务器的 TCP 或 TLS 连接被拒绝。可能没有服务监听主机的 TCP 或 TLS 端口，或者防火墙可能阻止了访问。

. 检查您是否输入了系统日志服务器的正确 FQDN 或 IP 地址、端口和协议。
. 确认 syslog 服务的主机正在运行侦听指定端口的 syslog 守护程序。
. 确认防火墙没有阻止从节点到 syslog 服务器的 IP 和端口的 TCP/TLS 连接访问。




 a| 
网络不可达
 a| 
系统日志服务器不在直接连接的子网上。路由器返回 ICMP 故障消息，表明它无法将列出的节点的测试消息转发到系统日志服务器。

. 检查您是否输入了系统日志服务器的正确 FQDN 或 IP 地址。
. 对于列出的每个节点，检查网格网络子网列表、管理网络子网列表和客户端网络网关。确认这些配置已通过预期的网络接口和网关（网格、管理或客户端）将流量路由到 syslog 服务器。




 a| 
主机不可达
 a| 
系统日志服务器位于直接连接的子网（列出的节点用于其网格、管理或客户端 IP 地址的子网）。节点尝试发送测试消息，但未收到对系统日志服务器 MAC 地址的 ARP 请求的响应。

. 检查您是否输入了系统日志服务器的正确 FQDN 或 IP 地址。
. 检查运行 syslog 服务的主机是否已启动。




 a| 
连接超时
 a| 
尝试了 TCP/TLS 连接，但很长时间没有收到来自 syslog 服务器的响应。可能存在路由配置错误，或者防火墙可能丢弃流量而不发送任何响应（常见配置）。

. 检查您是否输入了系统日志服务器的正确 FQDN 或 IP 地址。
. 对于列出的每个节点，检查网格网络子网列表、管理网络子网列表和客户端网络网关。确认这些配置已使用您期望到达 syslog 服务器的网络接口和网关（网格、管理或客户端）将流量路由到 syslog 服务器。
. 确认防火墙没有阻止从列出的节点到 syslog 服务器的 IP 和端口的 TCP/TLS 连接访问。




 a| 
连接已被合作伙伴关闭
 a| 
与 syslog 服务器的 TCP 连接已成功建立，但随后被关闭。造成这种情况的原因可能包括：

* 系统日志服务器可能已重新启动或重启。
* 节点和系统日志服务器可能有不同的 TCP/TLS 设置。
* 中间防火墙可能正在关闭空闲的 TCP 连接。
* 监听 syslog 服务器端口的非 syslog 服务器可能已关闭连接。


要解决此问题：

. 检查您是否输入了系统日志服务器的正确 FQDN 或 IP 地址、端口和协议。
. 如果您正在使用 TLS，请确认 syslog 服务器也正在使用 TLS。如果您使用的是 TCP，请确认 syslog 服务器也使用 TCP。
. 检查中间防火墙是否未配置为关闭空闲的 TCP 连接。




 a| 
TLS 证书错误
 a| 
从 syslog 服务器收到的服务器证书与您提供的 CA 证书包和客户端证书不兼容。

. 确认 CA 证书包和客户端证书（如果有）与 syslog 服务器上的服务器证书兼容。
. 确认来自 syslog 服务器的服务器证书中的身份包含预期的 IP 或 FQDN 值。




 a| 
转发暂停
 a| 
Syslog 记录不再转发到 syslog 服务器，并且StorageGRID无法检测原因。

查看此错误提供的调试日志以尝试确定根本原因。



 a| 
TLS 会话已终止
 a| 
系统日志服务器终止了 TLS 会话，而StorageGRID无法检测原因。

. 查看此错误提供的调试日志以尝试确定根本原因。
. 检查您是否输入了系统日志服务器的正确 FQDN 或 IP 地址、端口和协议。
. 如果您正在使用 TLS，请确认 syslog 服务器也正在使用 TLS。如果您使用的是 TCP，请确认 syslog 服务器也使用 TCP。
. 确认 CA 证书包和客户端证书（如果有）与来自 syslog 服务器的服务器证书兼容。
. 确认来自 syslog 服务器的服务器证书中的身份包含预期的 IP 或 FQDN 值。




 a| 
结果查询失败
 a| 
用于系统日志服务器配置和测试的管理节点无法从列出的节点请求测试结果。一个或多个节点可能已关闭。

. 按照标准故障排除步骤确保节点在线并且所有预期服务都在运行。
. 在列出的节点上重新启动 miscd 服务。


|===