---
permalink: vmware/storage-and-performance-requirements.html 
sidebar: sidebar 
keywords: storage requirements, performance requirements, netapp ontap, fabricpool 
summary: 您必须了解虚拟机托管的StorageGRID节点的存储和性能要求，以便提供足够的空间来支持初始配置和未来的存储扩展。 
---
= 存储和性能要求
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您必须了解虚拟机托管的StorageGRID节点的存储和性能要求，以便提供足够的空间来支持初始配置和未来的存储扩展。



== 性能要求

操作系统卷和第一个存储卷的性能会显著影响系统的整体性能。确保这些在延迟、每秒输入/输出操作（IOPS）和吞吐量方面提供足够的磁盘性能。

所有StorageGRID节点都要求操作系统驱动器和所有存储卷都启用回写缓存。缓存必须位于受保护或持久的媒体上。



== 使用NetApp ONTAP存储的虚拟机的要求

如果您将StorageGRID节点部署为虚拟机，并且存储从NetApp ONTAP系统分配，则您已确认该卷未启用FabricPool分层策略。例如，如果StorageGRID节点在 VMware 主机上作为虚拟机运行，请确保支持该节点数据存储的卷未启用FabricPool分层策略。禁用与StorageGRID节点一起使用的卷的FabricPool分层可简化故障排除和存储操作。


NOTE: 切勿使用FabricPool将与StorageGRID相关的任何数据分层回StorageGRID本身。将StorageGRID数据分层回StorageGRID会增加故障排除和操作的复杂性。



== 所需虚拟机数量

每个StorageGRID站点至少需要三个存储节点。



== 按节点类型划分的存储要求

在生产环境中， StorageGRID节点的虚拟机必须满足不同的要求，具体取决于节点的类型。


NOTE: 磁盘快照不能用于恢复网格节点。相反，请参阅link:../maintain/warnings-and-considerations-for-grid-node-recovery.html["网格节点恢复"]针对每种类型的节点的程序。

[cols="1a,2a"]
|===
| 节点类型 | 存储 


 a| 
管理节点
 a| 
100 GB LUN 用于操作系统

管理节点表的 200 GB LUN

200 GB LUN 用于管理节点审计日志



 a| 
存储节点
 a| 
100 GB LUN 用于操作系统

此主机上每个存储节点有 3 个 LUN

*注意*：一个存储节点可以有 1 到 16 个存储 LUN；建议至少有 3 个存储 LUN。

每个 LUN 的最小大小：4 TB

测试的最大 LUN 大小：39 TB。



 a| 
存储节点（仅元数据）
 a| 
100 GB LUN 用于操作系统

1 LUN

每个 LUN 的最小大小：4 TB

测试的最大 LUN 大小：39 TB。

*注意*：仅元数据存储节点只需要一个 rangedb。



 a| 
网关节点
 a| 
100 GB LUN 用于操作系统

|===

NOTE: 根据配置的审计级别、用户输入的大小（例如 S3 对象密钥名称）以及需要保留的审计日志数据量，您可能需要增加每个管理节点上审计日志 LUN 的大小。通常，网格每个 S3 操作会生成大约 1 KB 的审计数据，这意味着 200 GB 的 LUN 可以在两到三天内支持每天 7000 万次操作或每秒 800 次操作。



== 存储节点的存储要求

基于软件的存储节点可以有 1 到 16 个存储卷；建议使用 3 个或更多存储卷。每个存储卷应为 4 TB 或更大。


NOTE: 设备存储节点还可以拥有最多 48 个存储卷。

如图所示， StorageGRID在每个存储节点的存储卷 0 上为对象元数据保留空间。存储卷 0 上的任何剩余空间以及存储节点中的任何其他存储卷均专门用于对象数据。

image::../media/metadata_space_storage_node.png[元数据空间存储节点]

为了提供冗余并保护对象元数据免于丢失， StorageGRID在每个站点存储系统中所有对象的元数据的三个副本。对象元数据的三个副本均匀分布在每个站点的所有存储节点上。

当安装仅具有元数据存储节点的网格时，该网格还必须包含用于对象存储的最小数量的节点。看link:../primer/what-storage-node-is.html#types-of-storage-nodes["存储节点的类型"]有关仅元数据存储节点的更多信息。

* 对于单站点网格，至少配置两个存储节点用于对象和元数据。
* 对于多站点网格，每个站点至少配置一个存储节点来存储对象和元数据。


当您为新存储节点的卷 0 分配空间时，必须确保有足够的空间容纳该节点的所有对象元数据部分。

* 您必须至少为卷 0 分配至少 4 TB。
+

NOTE: 如果您仅为存储节点使用一个存储卷，并且为该卷分配 4 TB 或更少的容量，则存储节点可能会在启动时进入存储只读状态并仅存储对象元数据。

+

NOTE: 如果您为卷 0（仅非生产用途）分配少于 500 GB 的空间，则存储卷容量的 10% 将保留用于元数据。

* 基于软件的纯元数据节点资源必须与现有的存储节点资源相匹配。例如：
+
** 如果现有StorageGRID站点使用 SG6000 或 SG6100 设备，则基于软件的仅元数据节点必须满足以下最低要求：
+
*** 128 GB 内存
*** 8核CPU
*** 8 TB SSD 或用于 Cassandra 数据库的等效存储空间（rangedb/0）


** 如果现有的StorageGRID站点使用具有 24 GB RAM、8 核 CPU 和 3 TB 或 4TB 元数据存储的虚拟存储节点，则基于软件的仅元数据节点应使用类似的资源（24 GB RAM、8 核 CPU 和 4TB 元数据存储（rangedb/0）。
+
添加新的StorageGRID站点时，新站点的总元数据容量至少应与现有StorageGRID站点相匹配，并且新站点资源应与现有StorageGRID站点的存储节点相匹配。



* 如果您正在安装新系统（StorageGRID 11.6 或更高版本）并且每个存储节点都有 128 GB 或更多的 RAM，请为卷 0 分配 8 TB 或更多。对卷 0 使用较大的值可以增加每个存储节点上元数据允许的空间。
* 为站点配置不同的存储节点时，如果可能，请对卷 0 使用相同的设置。如果站点包含不同大小的存储节点，则具有最小卷 0 的存储节点将决定该站点的元数据容量。


欲了解详情，请访问link:../admin/managing-object-metadata-storage.html["管理对象元数据存储"]。
